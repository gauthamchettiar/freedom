{{- /*
  Author Widget
  
  Displays the author name from page params or site params.
  
  Parameters:
    - page (required): Page context
    - site (required): Site context
    - class (optional): Additional CSS classes
    - prefix (optional): Text before author name (default: "")
    - key (optional): Config key for visibility (default: "showAuthor")
  
  Example:
    {{ partial "widgets/meta/author.html" (dict "page" . "site" .Site) }}
    {{ partial "widgets/meta/author.html" (dict "page" . "site" .Site "prefix" "Written by ") }}
*/ -}}


{{- $key := .key | default "Author" -}}
{{- $class := .class | default "" -}}

{{ $showAuthor := (partial "utils/config.html" (dict "key" (print "show" $key))) }}
{{ $showAuthorIcon := (partial "utils/config.html" (dict "key" (print "show" $key "Icon"))) }}

{{- $author := "" -}}
{{- with page.Params.author -}}
  {{- $author = . -}}
{{- else -}}
  {{- with site.Params.author -}}
    {{- $author = . -}}
  {{- end -}}
{{- end -}}

{{- if and $showAuthor $author -}}
<span class="author {{ $class }}">
  {{- if $showAuthorIcon -}}
    {{ partialCached "widgets/icon.html" (dict "name" "user" "style" "regular") "user" "regular" }}&nbsp;&nbsp;
  {{- end -}}
  {{ $author }}
</span>
{{- end -}}
