{{- /*
  Table of Contents Widget
  
  Displays a table of contents for the current page based on headings.
  Uses Hugo's built-in .TableOfContents method, which properly integrates
  with custom heading renderers like render-heading.html.
  
  Parameters:
    - page (required): Page context
    - site (required): Site context
    - title (optional): TOC heading title (default: "Table of Contents")
    - class (optional): Additional CSS classes
    - key (optional): Config key for visibility (default: "showToc")
  
  Example:
    {{ partial "widgets/meta/toc.html" (dict "page" . "site" .Site) }}
    {{ partial "widgets/meta/toc.html" (dict "page" . "site" .Site "title" "On This Page") }}
*/ -}}


{{- $key := .key | default "Toc" -}}
{{- $class := .class | default "" -}}

{{- $showToc := partial "utils/config.html" (dict "key" (print "show" $key) "default" true) -}}

{{- if and $showToc page.TableOfContents -}}
<nav class="toc {{ $class }}" aria-label="Table of Contents">
  {{- page.TableOfContents | safeHTML -}}
</nav>
{{- end -}}





