{{- /*
  List Widget
  
  Renders a list of pageList as an unordered list with links.
  
  Parameters:
    - pageList (required): Slice of pageList to render
    - page (required): Page context
    - site (required): Site context
    - class (optional): Additional CSS classes for the ul element
    - listStyle (optional): CSS list-style-type value (default: "none")
    - dateFormat (optional): Date format (default: ":date_medium")
    - key (optional): Config key for visibility (default: "showPostList")
  
  Example:
    {{ partial "widgets/posts/list.html" (dict "page" . "site" .Site "pageList" .Pages) }}
    {{ partial "widgets/posts/list.html" (dict "page" . "site" .Site "pageList" .Pages "listStyle" "disc") }}
    {{ partial "widgets/posts/list.html" (dict "page" . "site" .Site "pageList" .Pages "class" "post-list" "listStyle" "circle") }}
*/ -}}


{{- $pageList := .pageList -}}
{{- $key := .key | default "PostList" -}}
{{- $class := .class | default "" -}}

{{- $showPostList := (partial "utils/config.html" (dict "key" (print "show" $key) "default" true)) -}}
{{- $showPostListDate := (partial "utils/config.html" (dict "key" (print "show" $key "Date") "default" true)) -}}
{{- $postListStyle := (partial "utils/config.html" (dict "key" (print $key "Style") "default" (.listStyle | default "none"))) -}}
{{- $postListDateFormat := (partial "utils/config.html" (dict "key" (print $key "DateFormat") "default" (.dateFormat | default ":date_medium"))) -}}

{{- if and $pageList $showPostList -}}
  {{- $paddingLeft := cond (eq $postListStyle "none") "0" "" -}}
  <ul class="page-list kind-{{ page.Kind }} section-{{ page.Section }} type-{{ page.Type }} {{ $class }}" style="list-style-type: {{ $postListStyle }};{{ if $paddingLeft }} padding-left: {{ $paddingLeft }};{{ end }}">
    {{- range $pageList -}}
      <li class="page-list-item">
        {{- if $showPostListDate -}}
          {{- with .Date -}}
            <code class="page-list-date">{{ . | time.Format $postListDateFormat }} Â» </code>
          {{- end -}}
        {{- end -}}
        <a class="page-list-link" href="{{ .RelPermalink }}">{{ .Title }}</a>
      </li>
    {{- end -}}
  </ul>
{{- end -}}

