{{- /*
  Render Codeblock Hook
  
  Renders code blocks with syntax highlighting and optional display label.
  - Display label is positioned at the top right (via {display="..."} attribute)
  - Falls back to language type if display is not provided
  - Control visibility with {showLang=false} attribute (default: true)
  
  Examples:
    ```go {display="main.go"}
    package main
    ```
    
    ```go {showLang=false}
    package main
    ```
*/ -}}
{{ $showLang := .Attributes.showlang | default true }}
{{ $showCopy := .Attributes.showcopy | default true }}

<div class="codeblock">
  {{- if $showCopy -}}
  <button class="codeblock-copy" aria-label="Copy code" title="Copy code">
    {{ partial "icon.html" (dict "name" "copy" "class" "icon-sm") }}
  </button>
  {{- end -}}
  {{- if $showLang -}}
    {{- $displayLabel := .Attributes.display | default .Type -}}
    {{- if $displayLabel -}}
      <div class="codeblock-lang chroma"><span class="s1">{{ $displayLabel }}</span></div>
    {{- end -}}
  {{- end -}}
  {{ highlight .Inner .Type .Options }}
</div>
